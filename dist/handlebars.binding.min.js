// handlebars.binding
// ------------------
// v0.3.2
//
// Copyright (c) 2013-2016 Mateus Maso
// Distributed under MIT license
//
// http://github.com/mateusmaso/handlebars.binding

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../utils"),h=a("../deps"),i=d(h),j=a("../core"),k=function(){function a(b,c,d,f){e(this,a),this.node,this.observer,this.output,this.previousOutput,this.marker,this.delimiter,this.id=(0,h.getUtils)().uniqueId(),this.value=d,this.context=b,this.keypath=c,this.options=f,c&&(this.value=(0,g.path)(this.context,this.keypath))}return f(a,[{key:"setNode",value:function(a){return a.bindings=a.bindings||[],a.bindings.push(this),this.node=a}},{key:"setMarker",value:function(a){return a.binding=this,this.marker=a}},{key:"setDelimiter",value:function(a){return this.delimiter=a}},{key:"setOutput",value:function(a){return this.previousOutput=this.output,this.output=a}},{key:"setObserver",value:function(a){return this.observer=a}},{key:"createElement",value:function(){return'<hb-binding id="'+this.id+'"></hb-binding>'}},{key:"createAttribute",value:function(){return"hb-binding-"+this.id}},{key:"initialize",value:function(){return this.options.hash.attr?this.initializeAttribute():this.options.fn?this.initializeBlock():this.initializeInline()}},{key:"initializeAttribute",value:function(a){var b=this,c="binding-"+this.id;return i["default"].Handlebars.registerAttribute(c,function(a){return null},{ready:function(a){b.setNode(a),b.render({initialize:!0}),b.observe(),delete i["default"].Handlebars.attributes[c]}}),this.createAttribute()}},{key:"initializeInline",value:function(){return this.setNode(document.createTextNode("")),this.render({initialize:!0}),this.observe(),i["default"].Handlebars.store.hold(this.id,(0,h.getUtils)().flatten([this.node])),new i["default"].Handlebars.SafeString(this.createElement())}},{key:"initializeBlock",value:function(){this.setMarker(document.createTextNode("")),this.setDelimiter(document.createTextNode(""));var a=this.render({initialize:!0});return this.observe(),i["default"].Handlebars.store.hold(this.id,(0,h.getUtils)().flatten([this.marker,a,this.delimiter])),new i["default"].Handlebars.SafeString(this.createElement())}},{key:"runOutput",value:function(){this.options.fn?this.setOutput(this.options.fn(this.context)):this.setOutput(this.value)}},{key:"render",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.runOutput(),this.options.hash.attr?this.renderAttribute(a):this.options.fn?this.renderBlock(a):this.renderInline(a)}},{key:"renderAttribute",value:function(){arguments.length<=0||void 0===arguments[0]?{}:arguments[0];1==this.options.hash.attr?this.previousOutput!=this.output&&(this.node.removeAttribute(this.previousOutput),this.node.setAttribute(this.output,"")):"class"==this.options.hash.attr?((0,g.removeClass)(this.node,this.previousOutput),(0,g.addClass)(this.node,this.output)):this.node.setAttribute(this.options.hash.attr,this.output)}},{key:"renderInline",value:function(){arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(0,h.getUtils)().isString(this.output)?this.node.textContent=(0,h.getUtils)().escapeExpression(new i["default"].Handlebars.SafeString(this.output)):this.node.textContent=(0,h.getUtils)().escapeExpression(this.output)}},{key:"renderBlock",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return a.initialize?i["default"].Handlebars.parseHTML(this.output):((0,g.removeBetween)(this.marker,this.delimiter).forEach(function(a){return(0,j.unbind)(a)}),void(0,h.getUtils)().insertAfter(this.marker,i["default"].Handlebars.parseHTML(this.output)))}},{key:"observe",value:function(){var a=this;(0,h.getUtils)().isArray(this.value)?(this.setObserver(new i["default"].ArrayObserver(this.value)),this.observer.open(function(){return a.render()})):(0,h.getUtils)().isObject(this.value)?(this.setObserver(new i["default"].ObjectObserver(this.value)),this.observer.open(function(){return a.render()})):(this.setObserver(new i["default"].PathObserver(this.context,this.keypath)),this.observer.open(function(b){a.value=b,a.render()}))}},{key:"stopObserving",value:function(){this.observer&&this.observer.close()}}]),a}();c["default"]=k},{"../core":5,"../deps":6,"../utils":8}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function r(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:r(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},j=a("./binding"),k=d(j),l=a("../utils"),m=a("../deps"),n=d(m),o=a("../core"),p=function(a){function b(){return e(this,b),f(this,Object.getPrototypeOf(b).apply(this,arguments))}return g(b,a),h(b,[{key:"initialize",value:function(){return this.options.hash.bind?i(Object.getPrototypeOf(b.prototype),"initialize",this).call(this):this.runOutput()}},{key:"runOutput",value:function(){return this.options.hash["var"]?this.context[this.options.hash["var"]]=this.value:(0,m.getUtils)().isObject(this.value)&&(0,m.getUtils)().extend(this.context,this.value),this.setOutput(this.options.fn(this.context))}},{key:"observe",value:function(){var a=this;this.parentContextObserver=new n["default"].ObjectObserver(this.options.hash.parentContext),this.parentContextObserver.open(function(){(0,m.getUtils)().extend(a.context,a.options.hash.parentContext)}),(0,m.getUtils)().isObject(this.value)&&(this.options.hash["var"]||(this.setObserver(new n["default"].ObjectObserver(this.value)),this.observer.open(function(){return(0,m.getUtils)().extend(a.context,a.value)})))}}]),b}(k["default"]),q=function(a){function b(a,c,d,g){e(this,b);var h=f(this,Object.getPrototypeOf(b).call(this,a,c,d,g));return h.itemBindings=[],h.empty=0==d.length,h.options.hash.parentContext=h.context,h}return g(b,a),h(b,[{key:"initialize",value:function(){return this.options.hash.bind?i(Object.getPrototypeOf(b.prototype),"initialize",this).call(this):this.runOutput()}},{key:"observe",value:function(){var a=this;this.setObserver(new n["default"].ArrayObserver(this.value)),this.observer.open(function(b){b.forEach(function(b){a.empty=0==a.value.length,a.render({splice:b})}),a.value.forEach(function(b,c){a.itemBindings[c].context.index=c})})}},{key:"runOutput",value:function(){var a=this,b="";return this.itemBindings=[],this.value.forEach(function(c,d){var e=new p((0,m.getUtils)().extend({index:d,$this:c},a.context),null,c,a.options);a.itemBindings.push(e),b+=e.initialize()}),this.setOutput(this.empty?this.options.inverse(this.context):b)}},{key:"render",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!a.splice)return i(Object.getPrototypeOf(b.prototype),"render",this).call(this,a);var c=a.splice;if(c.removed.length>0)for(var d=0,e=c.index;e<c.index+c.removed.length;e++)this.removeItem(e-d++);if(c.addedCount>0)for(var f=c.index;f<c.index+c.addedCount;f++)this.addItem(f)}},{key:"addItem",value:function(a){var b;b=this.itemBindings[a-1]?this.itemBindings[a-1].delimiter:this.marker;var c=this.value[a],d=new p((0,m.getUtils)().extend({index:a,$this:c},this.context),null,c,this.options);(0,m.getUtils)().insertAfter(b,n["default"].Handlebars.parseHTML(d.initialize())),this.itemBindings.splice(a,0,d)}},{key:"removeItem",value:function(a){var b=this.itemBindings[a];(0,l.removeBetween)(b.marker,b.delimiter).forEach(function(a){return(0,o.unbind)(a)}),b.marker.remove(),b.delimiter.remove(),this.itemBindings.splice(a,1)}}]),b}(k["default"]);c["default"]=q},{"../core":5,"../deps":6,"../utils":8,"./binding":1}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function p(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:p(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},j=a("./binding"),k=d(j),l=a("../deps"),m=d(l),n=a("../utils"),o=function(a){function b(a,c,d,g){e(this,b);var h=f(this,Object.getPrototypeOf(b).call(this,a,c,d,g));return h.falsy=(0,n.isFalsy)(d),h}return g(b,a),h(b,[{key:"initialize",value:function(){return this.options.hash.bind?i(Object.getPrototypeOf(b.prototype),"initialize",this).call(this):this.runOutput()}},{key:"observe",value:function(){var a=this;(0,l.getUtils)().isArray(this.value)?(this.setObserver(new m["default"].ArrayObserver(this.value)),this.observer.open(function(){(0,n.isFalsy)(a.value)!=a.falsy&&(a.falsy=(0,n.isFalsy)(a.value),a.render())})):(this.setObserver(new m["default"].PathObserver(this.context,this.keypath)),this.observer.open(function(b){a.value=b,(0,n.isFalsy)(a.value)!=a.falsy&&(a.falsy=(0,n.isFalsy)(a.value),a.render())}))}},{key:"runOutput",value:function(){return this.falsy?this.setOutput(this.options.inverse?this.options.inverse(this.context):this.options.hash["else"]):this.setOutput(this.options.fn?this.options.fn(this.context):this.options.hash.then)}},{key:"renderAttribute",value:function(){arguments.length<=0||void 0===arguments[0]?{}:arguments[0];1==this.options.hash.attr?(this.node.removeAttribute(this.previousOutput),this.output&&this.node.setAttribute(this.output,"")):"class"==this.options.hash.attr?((0,n.removeClass)(this.node,this.previousOutput),(0,n.addClass)(this.node,this.output)):this.node.setAttribute(this.options.hash.attr,this.output)}}]),b}(k["default"]);c["default"]=o},{"../deps":6,"../utils":8,"./binding":1}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c.EachBinding=c.IfBinding=c.Binding=void 0;var e=a("./binding"),f=d(e),g=a("./if_binding"),h=d(g),i=a("./each_binding"),j=d(i);c.Binding=f["default"],c.IfBinding=h["default"],c.EachBinding=j["default"]},{"./binding":1,"./each_binding":2,"./if_binding":3}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){(0,j.traverse)(a,function(a){a.binding?a.binding.observe():a.bindings&&a.bindings.forEach(function(a){return a.observe()})})}function f(a){(0,j.traverse)(a,function(a){a.binding?a.binding.stopObserving():a.bindings&&a.bindings.forEach(function(a){return a.stopObserving()})})}function g(){l["default"].Platform.performMicrotaskCheckpoint()}function h(){l["default"].Handlebars.registerHelper("bind",function(a,b){return new i.Binding(this,a,null,b).initialize()}),l["default"].Handlebars.registerHelper("if",function(a,b){var c;return b.hash.bindAttr&&(b.hash.attr=b.hash.bindAttr,b.hash.bind=!0),b.hash.bind&&(0,k.getUtils)().isString(a)&&(c=a,a=(0,j.path)(this,c)),new i.IfBinding(this,c,a,b).initialize()}),l["default"].Handlebars.registerHelper("each",function(a,b){return new i.EachBinding(this,null,a,b).initialize()}),l["default"].Handlebars.registerHelper("unless",function(a,b){var c=b.fn,d=b.inverse,e=b.hash.then,f=b.hash["else"];return b.fn=d,b.inverse=c,b.hash.then=f,b.hash["else"]=e,l["default"].Handlebars.helpers["if"].apply(this,[a,b])}),l["default"].Handlebars.registerElement("binding",function(a){return a.id})}Object.defineProperty(c,"__esModule",{value:!0}),c.bind=e,c.unbind=f,c.update=g,c.register=h;var i=a("../bindings"),j=a("../utils"),k=a("../deps"),l=d(k)},{"../bindings":4,"../deps":6,"../utils":8}],6:[function(a,b,c){"use strict";function d(){return e.Handlebars.Utils}Object.defineProperty(c,"__esModule",{value:!0}),c.getUtils=d;var e={};c["default"]=e},{}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){var d=a.Utils.extend;return d(j["default"],{Handlebars:a,Observer:b.Observer,ArrayObserver:b.ArrayObserver,ObjectObserver:b.ObjectObserver,PathObserver:b.PathObserver,Platform:c}),d(a,{Binding:f.Binding,IfBinding:f.IfBinding,EachBinding:f.EachBinding,bind:g.bind,unbind:g.unbind,update:g.update}),d(a.Utils,{path:h.path,traverse:h.traverse,removeBetween:h.removeBetween,nodesBetween:h.nodesBetween,removeClass:h.removeClass,addClass:h.addClass,hasClass:h.hasClass,isFalsy:h.isFalsy}),(0,g.register)(),a}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./bindings"),g=a("./core"),h=a("./utils"),i=a("./deps"),j=d(i);"undefined"!=typeof window&&window.Handlebars&&window.Platform&&(e=e(window.Handlebars,{Observer:window.Observer,ArrayObserver:window.ArrayObserver,ObjectObserver:window.ObjectObserver,PathObserver:window.PathObserver},window.Platform)),c["default"]=e},{"./bindings":4,"./core":5,"./deps":6,"./utils":8}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return!a||(0,m.getUtils)().isEmpty(a)}function f(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))}function g(a,b){return f(a,b)?void 0:0==a.className.length?a.className=b:a.className+=" "+b}function h(a,b){return f(a,b)?a.className=a.className.replace(new RegExp("(\\s|^)"+b+"(\\s|$)"),""):void 0}function i(a,b){for(var c=a.nextSibling,d=[];c&&c!=b;){var e=c.nextSibling;d.push(c),c=e}return d}function j(a,b){var c=i(a,b);return c.forEach(function(a){return a.remove()}),c}function k(a,b){for(b.apply(this,[a]),a=a.firstChild;a;)k(a,b),a=a.nextSibling}function l(a,b){var c=b.split("."),d=a[c.shift()];return c.forEach(function(a){return d=d[a]}),d}Object.defineProperty(c,"__esModule",{value:!0}),c.isFalsy=e,c.hasClass=f,c.addClass=g,c.removeClass=h,c.nodesBetween=i,c.removeBetween=j,c.traverse=k,c.path=l;var m=a("../deps");d(m)},{"../deps":6}]},{},[1,2,3,4,5,6,7,8]);