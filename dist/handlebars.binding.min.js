// handlebars.binding
// ------------------
// v0.3.1
//
// Copyright (c) 2013-2016 Mateus Maso
// Distributed under MIT license
//
// http://github.com/mateusmaso/handlebars.binding

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(d){"use strict";function e(a){return a&&a.__esModule?a:{"default":a}}var f=a("./handlebars.binding/binding"),g=e(f),h=a("./handlebars.binding/if_binding"),i=e(h),j=a("./handlebars.binding/each_binding"),k=e(j),l=a("./handlebars.binding/core"),m=a("./handlebars.binding/utils");!function(a,e){"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(b.exports=e(d.Handlebars)),c=e(d.Handlebars)):e(a.Handlebars)}(void 0,function(a){var b=a.Utils.extend;b(a,{Binding:g["default"],IfBinding:i["default"],EachBinding:k["default"],bind:l.bind,unbind:l.unbind,update:l.update}),b(a.Utils,{path:m.path,traverse:m.traverse,removeBetween:m.removeBetween,nodesBetween:m.nodesBetween,removeClass:m.removeClass,addClass:m.addClass,hasClass:m.hasClass,isFalsy:m.isFalsy}),(0,l.register)()})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./handlebars.binding/binding":2,"./handlebars.binding/core":3,"./handlebars.binding/each_binding":4,"./handlebars.binding/if_binding":5,"./handlebars.binding/utils":6}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("./utils"),g=Handlebars,h=g.attributes,i=g.store,j=g.SafeString,k=Handlebars.Utils,l=k.uniqueId,m=k.flatten,n=k.isString,o=k.escapeExpression,p=k.isArray,q=k.isObject,r=k.insertAfter,s=function(){function a(b,c,e,g){d(this,a),this.node,this.observer,this.output,this.previousOutput,this.marker,this.delimiter,this.id=l(),this.value=e,this.context=b,this.keypath=c,this.options=g,c&&(this.value=(0,f.path)(this.context,this.keypath))}return e(a,[{key:"setNode",value:function(a){return a.bindings=a.bindings||[],a.bindings.push(this),this.node=a}},{key:"setMarker",value:function(a){return a.binding=this,this.marker=a}},{key:"setDelimiter",value:function(a){return this.delimiter=a}},{key:"setOutput",value:function(a){return this.previousOutput=this.output,this.output=a}},{key:"setObserver",value:function(a){return this.observer=a}},{key:"createElement",value:function(){return'<hb-binding id="'+this.id+'"></hb-binding>'}},{key:"createAttribute",value:function(){return"hb-binding-"+this.id}},{key:"initialize",value:function(){return this.options.hash.attr?this.initializeAttribute():this.options.fn?this.initializeBlock():this.initializeInline()}},{key:"initializeAttribute",value:function(a){var b=this,c="binding-"+this.id;return Handlebars.registerAttribute(c,function(a){return null},{ready:function(a){b.setNode(a),b.render({initialize:!0}),b.observe(),delete h[c]}}),this.createAttribute()}},{key:"initializeInline",value:function(){return this.setNode(document.createTextNode("")),this.render({initialize:!0}),this.observe(),i.hold(this.id,m([this.node])),new j(this.createElement())}},{key:"initializeBlock",value:function(){this.setMarker(document.createTextNode("")),this.setDelimiter(document.createTextNode(""));var a=this.render({initialize:!0});return this.observe(),i.hold(this.id,m([this.marker,a,this.delimiter])),new j(this.createElement())}},{key:"runOutput",value:function(){this.options.fn?this.setOutput(this.options.fn(this.context)):this.setOutput(this.value)}},{key:"render",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.runOutput(),this.options.hash.attr?this.renderAttribute(a):this.options.fn?this.renderBlock(a):this.renderInline(a)}},{key:"renderAttribute",value:function(){arguments.length<=0||void 0===arguments[0]?{}:arguments[0];1==this.options.hash.attr?this.previousOutput!=this.output&&(this.node.removeAttribute(this.previousOutput),this.node.setAttribute(this.output,"")):"class"==this.options.hash.attr?((0,f.removeClass)(this.node,this.previousOutput),(0,f.addClass)(this.node,this.output)):this.node.setAttribute(this.options.hash.attr,this.output)}},{key:"renderInline",value:function(){arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this.output)?this.node.textContent=o(new j(this.output)):this.node.textContent=o(this.output)}},{key:"renderBlock",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return a.initialize?Handlebars.parseHTML(this.output):((0,f.removeBetween)(this.marker,this.delimiter).forEach(function(a){return Handlebars.unbind(a)}),void r(this.marker,Handlebars.parseHTML(this.output)))}},{key:"observe",value:function(){var a=this;p(this.value)?(this.setObserver(new ArrayObserver(this.value)),this.observer.open(function(){return a.render()})):q(this.value)?(this.setObserver(new ObjectObserver(this.value)),this.observer.open(function(){return a.render()})):(this.setObserver(new PathObserver(this.context,this.keypath)),this.observer.open(function(b){a.value=b,a.render()}))}},{key:"stopObserving",value:function(){this.observer&&this.observer.close()}}]),a}();c["default"]=s},{"./utils":6}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){(0,i.traverse)(a,function(a){a.binding?a.binding.observe():a.bindings&&a.bindings.forEach(function(a){return a.observe()})})}function f(a){(0,i.traverse)(a,function(a){a.binding?a.binding.stopObserving():a.bindings&&a.bindings.forEach(function(a){return a.stopObserving()})})}function g(){Platform.performMicrotaskCheckpoint()}function h(){Handlebars.registerHelper("bind",function(a,b){return new k["default"](this,a,null,b).initialize()}),Handlebars.registerHelper("if",function(a,b){var c;return b.hash.bindAttr&&(b.hash.attr=b.hash.bindAttr,b.hash.bind=!0),b.hash.bind&&r(a)&&(c=a,a=(0,i.path)(this,c)),new m["default"](this,c,a,b).initialize()}),Handlebars.registerHelper("each",function(a,b){return new o["default"](this,null,a,b).initialize()}),Handlebars.registerHelper("unless",function(a,b){var c=b.fn,d=b.inverse,e=b.hash.then,f=b.hash["else"];return b.fn=d,b.inverse=c,b.hash.then=f,b.hash["else"]=e,q["if"].apply(this,[a,b])}),Handlebars.registerElement("binding",function(a){return a.id})}Object.defineProperty(c,"__esModule",{value:!0}),c.bind=e,c.unbind=f,c.update=g,c.register=h;var i=a("./utils"),j=a("./binding"),k=d(j),l=a("./if_binding"),m=d(l),n=a("./each_binding"),o=d(n),p=Handlebars,q=p.helpers,r=Handlebars.Utils.isString},{"./binding":2,"./each_binding":4,"./if_binding":5,"./utils":6}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function t(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:t(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},j=a("./binding"),k=d(j),l=a("./utils"),m=Handlebars,n=(m.store,m.SafeString,Handlebars.Utils),o=(n.flatten,n.isObject),p=n.extend,q=n.insertAfter,r=function(a){function b(){return e(this,b),f(this,Object.getPrototypeOf(b).apply(this,arguments))}return g(b,a),h(b,[{key:"initialize",value:function(){return this.options.hash.bind?i(Object.getPrototypeOf(b.prototype),"initialize",this).call(this):this.runOutput()}},{key:"runOutput",value:function(){return this.options.hash["var"]?this.context[this.options.hash["var"]]=this.value:o(this.value)&&p(this.context,this.value),this.setOutput(this.options.fn(this.context))}},{key:"observe",value:function(){var a=this;this.parentContextObserver=new ObjectObserver(this.options.hash.parentContext),this.parentContextObserver.open(function(){p(a.context,a.options.hash.parentContext)}),o(this.value)&&(this.options.hash["var"]||(this.setObserver(new ObjectObserver(this.value)),this.observer.open(function(){return p(a.context,a.value)})))}}]),b}(k["default"]),s=function(a){function b(a,c,d,g){e(this,b);var h=f(this,Object.getPrototypeOf(b).call(this,a,c,d,g));return h.itemBindings=[],h.empty=0==d.length,h.options.hash.parentContext=h.context,h}return g(b,a),h(b,[{key:"initialize",value:function(){return this.options.hash.bind?i(Object.getPrototypeOf(b.prototype),"initialize",this).call(this):this.runOutput()}},{key:"observe",value:function(){var a=this;this.setObserver(new ArrayObserver(this.value)),this.observer.open(function(b){b.forEach(function(b){a.empty=0==a.value.length,a.render({splice:b})}),a.value.forEach(function(b,c){a.itemBindings[c].context.index=c})})}},{key:"runOutput",value:function(){var a=this,b="";return this.itemBindings=[],this.value.forEach(function(c,d){var e=new r(p({index:d,$this:c},a.context),null,c,a.options);a.itemBindings.push(e),b+=e.initialize()}),this.setOutput(this.empty?this.options.inverse(this.context):b)}},{key:"render",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!a.splice)return i(Object.getPrototypeOf(b.prototype),"render",this).call(this,a);var c=a.splice;if(c.removed.length>0)for(var d=0,e=c.index;e<c.index+c.removed.length;e++)this.removeItem(e-d++);if(c.addedCount>0)for(var f=c.index;f<c.index+c.addedCount;f++)this.addItem(f)}},{key:"addItem",value:function(a){var b;b=this.itemBindings[a-1]?this.itemBindings[a-1].delimiter:this.marker;var c=this.value[a],d=new r(p({index:a,$this:c},this.context),null,c,this.options);q(b,Handlebars.parseHTML(d.initialize())),this.itemBindings.splice(a,0,d)}},{key:"removeItem",value:function(a){var b=this.itemBindings[a];(0,l.removeBetween)(b.marker,b.delimiter).forEach(function(a){return Handlebars.unbind(a)}),b.marker.remove(),b.delimiter.remove(),this.itemBindings.splice(a,1)}}]),b}(k["default"]);c["default"]=s},{"./binding":2,"./utils":6}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function o(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:o(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},j=a("./binding"),k=d(j),l=a("./utils"),m=Handlebars.Utils.isArray,n=function(a){function b(a,c,d,g){e(this,b);var h=f(this,Object.getPrototypeOf(b).call(this,a,c,d,g));return h.falsy=(0,l.isFalsy)(d),h}return g(b,a),h(b,[{key:"initialize",value:function(){return this.options.hash.bind?i(Object.getPrototypeOf(b.prototype),"initialize",this).call(this):this.runOutput()}},{key:"observe",value:function(){var a=this;m(this.value)?(this.setObserver(new ArrayObserver(this.value)),this.observer.open(function(){(0,l.isFalsy)(a.value)!=a.falsy&&(a.falsy=(0,l.isFalsy)(a.value),a.render())})):(this.setObserver(new PathObserver(this.context,this.keypath)),this.observer.open(function(b){a.value=b,(0,l.isFalsy)(a.value)!=a.falsy&&(a.falsy=(0,l.isFalsy)(a.value),a.render())}))}},{key:"runOutput",value:function(){return this.falsy?this.setOutput(this.options.inverse?this.options.inverse(this.context):this.options.hash["else"]):this.setOutput(this.options.fn?this.options.fn(this.context):this.options.hash.then)}},{key:"renderAttribute",value:function(){arguments.length<=0||void 0===arguments[0]?{}:arguments[0];1==this.options.hash.attr?(this.node.removeAttribute(this.previousOutput),this.output&&this.node.setAttribute(this.output,"")):"class"==this.options.hash.attr?((0,l.removeClass)(this.node,this.previousOutput),(0,l.addClass)(this.node,this.output)):this.node.setAttribute(this.options.hash.attr,this.output)}}]),b}(k["default"]);c["default"]=n},{"./binding":2,"./utils":6}],6:[function(a,b,c){"use strict";function d(a){return!a||l(a)}function e(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))}function f(a,b){return e(a,b)?void 0:0==a.className.length?a.className=b:a.className+=" "+b}function g(a,b){return e(a,b)?a.className=a.className.replace(new RegExp("(\\s|^)"+b+"(\\s|$)"),""):void 0}function h(a,b){for(var c=a.nextSibling,d=[];c&&c!=b;){var e=c.nextSibling;d.push(c),c=e}return d}function i(a,b){var c=h(a,b);return c.forEach(function(a){return a.remove()}),c}function j(a,b){for(b.apply(this,[a]),a=a.firstChild;a;)j(a,b),a=a.nextSibling}function k(a,b){var c=b.split("."),d=a[c.shift()];return c.forEach(function(a){return d=d[a]}),d}Object.defineProperty(c,"__esModule",{value:!0}),c.isFalsy=d,c.hasClass=e,c.addClass=f,c.removeClass=g,c.nodesBetween=h,c.removeBetween=i,c.traverse=j,c.path=k;var l=Handlebars.Utils.isEmpty},{}]},{},[1,2,3,4,5,6]);